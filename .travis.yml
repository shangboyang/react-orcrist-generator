language: node_js

matrix:
  include:
  - env: BUILD_TYPE=ONCE
    node_js: 7.0.0
  - env: BUILD_TYPE=ONCE
    node_js: 6.9.5
  - env: BUILD_TYPE=CHAIN
    node_js: 7.0.0
  - env: BUILD_TYPE=CHAIN
    node_js: 6.9.5

before_install:
  - npm -g install npm@5.3.0

install:
  - npm link

script:
  - react-orcrist --version
  - if [[ $BUILD_TYPE == 'ONCE' ]]; then react-orcrist --init test; fi
  - if [[ $BUILD_TYPE == 'ONCE' ]]; then cd test; fi
  - if [[ $BUILD_TYPE == 'ONCE' ]]; then npm install; fi
  - if [[ $BUILD_TYPE == 'ONCE' ]]; then npm run build; fi
  - if [[ $BUILD_TYPE == 'CHAIN' ]]; then mkdir test; fi
  - if [[ $BUILD_TYPE == 'CHAIN' ]]; then cd test; fi
  - if [[ $BUILD_TYPE == 'CHAIN' ]]; then react-orcrist --init; fi
  - if [[ $BUILD_TYPE == 'CHAIN' ]]; then npm install; fi
  - if [[ $BUILD_TYPE == 'CHAIN' ]]; then npm run build; fi

branches:
  only:
    - master